(this["webpackJsonpimage-rotator"]=this["webpackJsonpimage-rotator"]||[]).push([[0],[,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),c=a(4),r=a.n(c),s=(a(9),a(10),a(11),a(0));var d=function(){return Object(s.jsx)("div",{className:"navbar",children:Object(s.jsx)("h2",{children:"Image Rotator"})})},l=a(2),o=(a(13),102400);var u=function(e){var t=Object(n.useState)(e.defaultFile.name),a=Object(l.a)(t,2),i=a[0],c=a[1],r=Object(n.useState)(e.defaultFile.width),d=Object(l.a)(r,2),u=d[0],h=d[1],j=Object(n.useState)(e.defaultFile.height),b=Object(l.a)(j,2),g=b[0],O=b[1],f=Object(n.useState)(0),v=Object(l.a)(f,2),m=v[0],p=v[1],x=Object(n.useRef)(null),w=Object(n.useState)(null),C=Object(l.a)(w,2),I=C[0],D=C[1],R=Object(n.useState)(!1),y=Object(l.a)(R,2),M=y[0],k=y[1];Object(n.useEffect)((function(){D(x.current)}),[]);var S=function(t){if(t){var a=new Image;a.src=t,a.onload=function(){I.width=a.width,I.height=a.height,I.getContext("2d").drawImage(a,0,0);var t=I.getContext("2d").getImageData(0,0,I.width,I.height);e.loadImageData(t),h(a.width),O(a.height)}}};return!M&&I&&(S("/image-rotator/default.png"),k(!0)),Object(s.jsxs)("div",{className:"sidebar",children:[Object(s.jsxs)("div",{className:"sideBarSectionTop",children:[Object(s.jsx)("input",{id:"uploadImageButton",className:"btn btn-blue btn-large",type:"button",value:"Upload Image",onClick:function(){document.getElementById("imageLoader").value=null,document.getElementById("imageLoader").click()}}),Object(s.jsx)("input",{id:"imageLoader",type:"file",accept:"image/*",onChange:function(e){if(window.FileReader){if(e||0!==e.target.files.length){var t=e.target.files[0];if(t.type.match("image.*"))if(t.size/1024>o)alert("Maximum allowed size: 100 MB");else{var a=new FileReader;a.readAsDataURL(t),a.onload=function(e){e.target.readyState===FileReader.DONE&&(S(e.target.result),c(t.name))}}else alert("Only images are supported!")}}else alert("This browser does not support FileReader.")},hidden:!0}),Object(s.jsx)("canvas",{ref:x,style:{display:"none"}})]}),Object(s.jsx)("div",{className:"horizontalBreak"}),Object(s.jsxs)("div",{className:"sideBarSectionMiddle",children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{children:Object(s.jsx)("b",{children:"File: "})}),Object(s.jsx)("span",{children:i})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{children:Object(s.jsx)("b",{children:"Width:"})}),Object(s.jsx)("span",{children:u})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{children:Object(s.jsx)("b",{children:"Height:"})}),Object(s.jsx)("span",{children:g})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{children:Object(s.jsx)("b",{children:"Rotate:"})}),Object(s.jsxs)("span",{children:[Object(s.jsx)("input",{id:"inputAngle",type:"text",maxLength:"4",size:"2",onChange:function(e){return p(e.target.value)}}),Object(s.jsx)("input",{type:"button",className:"btn btn-blue btn-small",value:"Apply",onClick:function(){e.tryRotate(m)}})]})]}),Object(s.jsxs)("div",{className:"hoverPointer",children:[Object(s.jsx)("label",{htmlFor:"outlineCheckbox",children:"Outlined"}),Object(s.jsx)("input",{type:"checkbox",id:"outlineCheckbox",checked:e.outlined,onChange:function(t){return e.setOutlined(t.target.checked)}})]})]})]})};a(14);function h(e,t){if(t%360===0)return e;if(e.data.length/4!==e.width*e.height)throw new Error("Provided image is corrupted. Length of pixel array is not consistent with image size!");for(var a=t*(Math.PI/180),n=Math.abs(Math.cos(a)),i=Math.abs(Math.sin(a)),c=Math.round(e.width*n+e.height*i),r=Math.round(e.height*n+e.width*i),s=new Uint8ClampedArray(c*r*4),d=Math.round((e.width-c)/2),l=Math.round((e.height-r)/2),o=Math.round(c/2),u=Math.round(r/2),h=Math.sin(-a),b=Math.cos(-a),g=0;g<r;++g)for(var O=0;O<c;++O){var f=4*(O+g*c),v=j(O,g,o,u,h,b,d,l);if(v.X>=0&&v.X<e.width&&v.Y>=0&&v.Y<e.height){var m=4*(v.X+v.Y*e.width);s[f+0]=e.data[m+0],s[f+1]=e.data[m+1],s[f+2]=e.data[m+2],s[f+3]=e.data[m+3]}}return new ImageData(s,c,r)}function j(e,t,a,n,i,c){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,d=(e-a)*c-(t-n)*i+a,l=(e-a)*i+(t-n)*c+n;return d+=r,l+=s,{X:Math.round(d),Y:Math.round(l)}}var b={Canvas:null,BackupData:null,Init:function(e){b.Canvas=e,b.Clear()},ReDraw:function(e){e&&(b.BackupData=e,b.Clear(),b.Canvas.width=e.width,b.Canvas.height=e.height,b.Canvas.getContext("2d").putImageData(e,0,0))},Rotate:function(e,t,a){var n,i=b.Canvas.getContext("2d");n=b.BackupData?b.BackupData:i.getImageData(0,0,b.Canvas.width,b.Canvas.height);var c=performance.now(),r=c;try{var s=h(n,e);r=performance.now(),b.Clear(),b.Canvas.width=s.width,b.Canvas.height=s.height,i.putImageData(s,0,0),t(parseFloat(r-c).toFixed(3)),a(e)}catch(d){alert(d.message)}},Clear:function(){b.Canvas.getContext("2d").clearRect(0,0,b.Canvas.width,b.Canvas.height)},Recall:function(){b.BackupData&&b.ReDraw(b.BackupData)}};var g=function(e){var t=Object(n.useState)(!0),a=Object(l.a)(t,2),i=a[0],c=a[1],r=Object(n.useState)(0),d=Object(l.a)(r,2),o=d[0],u=d[1],h=Object(n.useState)(0),j=Object(l.a)(h,2),g=j[0],O=j[1],f=Object(n.useRef)(null);return Object(n.useEffect)((function(){b.Init(f.current)}),[]),Object(n.useEffect)((function(){c(e.outlined)}),[e.outlined]),Object(n.useEffect)((function(){b.ReDraw(e.loadedImageData)}),[e.loadedImageData]),Object(n.useEffect)((function(){e.rotated||(b.Rotate(e.rotateAngle,u,O),e.setRotated(!0))}),[e]),Object(s.jsxs)("div",{className:"imageContainer",children:[Object(s.jsx)("canvas",{id:"myCanvas",ref:f,style:{border:i?"2px solid red":"none"}}),Object(s.jsxs)("div",{id:"renderTime",children:["Rendered in: ",o," miliseconds"]}),Object(s.jsxs)("div",{id:"roateDegree",children:["Rotated: ",g," degree"]})]})},O=(a(15),{name:"default.png",width:440,height:250});var f=function(){var e=Object(n.useState)(!0),t=Object(l.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(null),r=Object(l.a)(c,2),d=r[0],o=r[1],h=Object(n.useState)(null),j=Object(l.a)(h,2),b=j[0],f=j[1],v=Object(n.useState)(!0),m=Object(l.a)(v,2),p=m[0],x=m[1];return Object(s.jsxs)("div",{className:"content",children:[Object(s.jsx)(u,{loadImageData:o,defaultFile:O,tryRotate:function(e){var t=parseInt(e);!isNaN(t)&&Number.isInteger(t)?(f(t),x(!1)):alert("Given angle is not a valid number!")},setOutlined:i,outlined:a}),Object(s.jsx)(g,{loadedImageData:d,outlined:a,rotateAngle:b,rotated:p,setRotated:x})]})};var v=function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(d,{}),Object(s.jsx)(f,{})]})};r.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)(v,{})}),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.abb1dfbd.chunk.js.map